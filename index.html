<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0095f6">
    <meta name="description" content="GÃ©rez vos finances personnelles facilement">
    
    <!-- Favicons optimisÃ©s pour le web -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸ’°</text></svg>">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="./manifest.json">
    <link rel="apple-touch-icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 180 180'><rect width='180' height='180' rx='30' fill='%230095f6'/><text x='90' y='110' font-family='Arial' font-size='80' text-anchor='middle' fill='white'>ğŸ’°</text></svg>">
    
    <!-- PWA Meta Tags -->
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="default">
    <meta name="apple-mobile-web-app-title" content="Finance Tracker">
    
    <link rel="stylesheet" href="./Style.css">
    <title>Finance Tracker Pro</title>
   
</head>
<body>
    <!-- ==================== ONBOARDING SYSTEM ==================== -->
<div class="onboarding-overlay" id="onboardingOverlay">
    <!-- Welcome Screen -->
    <div class="onboarding-screen" id="welcomeScreen">
        <div class="onboarding-content">
            <div class="onboarding-logo">ğŸ’°</div>
            <h1 class="onboarding-title">Bienvenue sur Finance Tracker</h1>
            <p class="onboarding-subtitle">Prenez le contrÃ´le de vos finances en quelques minutes</p>
            
            <div class="onboarding-features">
                <div class="feature-carousel-wrapper" id="featureCarousel">
                    <div class="feature-item active" data-feature="1">
                        <span class="feature-icon">ğŸ“Š</span>
                        <span class="feature-text">Suivez vos revenus et dÃ©penses</span>
                    </div>
                    <div class="feature-item next" data-feature="2">
                        <span class="feature-icon">ğŸ¯</span>
                        <span class="feature-text">DÃ©finissez des objectifs financiers</span>
                    </div>
                    <div class="feature-item next" data-feature="3">
                        <span class="feature-icon">ğŸ’¡</span>
                        <span class="feature-text">Recevez des conseils personnalisÃ©s</span>
                    </div>
                    <div class="feature-item next" data-feature="4">
                        <span class="feature-icon">ğŸ”’</span>
                        <span class="feature-text">SÃ©curisez vos donnÃ©es avec un PIN</span>
                    </div>
                </div>
                <div class="feature-navigation">
                    <div class="feature-dots" id="featureDots">
                        <span class="feature-dot active" onclick="goToFeature(1)"></span>
                        <span class="feature-dot" onclick="goToFeature(2)"></span>
                        <span class="feature-dot" onclick="goToFeature(3)"></span>
                        <span class="feature-dot" onclick="goToFeature(4)"></span>
                    </div>
                </div>
            </div>

            <button class="btn btn-primary btn-lg onboarding-btn" onclick="startTour()">
                <span class="btn-icon">ğŸš€</span>
                <span class="btn-text">Commencer le tour guidÃ©</span>
            </button>
            <button class="btn btn-ghost onboarding-btn-skip" onclick="skipOnboarding()">
                Passer l'introduction
            </button>
        </div>
    </div>

    <!-- Tour Guide Slides -->
    <div class="onboarding-screen" id="tourScreen" style="display: none;">
        <div class="onboarding-content">
            <div class="tour-progress">
                <div class="tour-progress-bar" id="tourProgressBar"></div>
            </div>
            
            <div class="tour-slides" id="tourSlides">
                <!-- Slide 1: Ajouter une transaction -->
                <div class="tour-slide active" data-slide="1">
                    <div class="tour-illustration">ğŸ’³</div>
                    <h2 class="tour-title">Ajouter une transaction</h2>
                    <p class="tour-description">
                        Enregistrez facilement vos revenus et dÃ©penses. Choisissez une catÃ©gorie, 
                        entrez le montant et cliquez sur le bouton correspondant.
                    </p>
                    <div class="tour-example">
                        <div class="example-card">
                            <strong>Exemple :</strong> Salaire de 500 000 FCFA â†’ CatÃ©gorie "Salaire" â†’ Bouton "+ Revenu"
                        </div>
                    </div>
                </div>

                <div class="tour-navigation" style="display: flex; justify-content: space-between; align-items: center; margin-top: 30px;">
                    <button class="btn btn-ghost" id="prevBtn" onclick="previousSlide()">
                        â† PrÃ©cÃ©dent
                    </button>
                    
                    <div class="tour-dots" id="tourDots">
                        </div>
                
                    <button class="btn btn-primary" id="nextBtn" onclick="nextSlide()">
                        Suivant â†’
                    </button>
                    
                    <button class="btn btn-primary" id="finishBtn" onclick="finishOnboarding()" style="display: none;">
                        C'est parti ! ğŸš€
                    </button>
                </div>

                <!-- Slide 2: Tableaux de bord -->
                <div class="tour-slide" data-slide="2">
                    <div class="tour-illustration">ğŸ“Š</div>
                    <h2 class="tour-title">Visualisez vos finances</h2>
                    <p class="tour-description">
                        Consultez vos revenus totaux, dÃ©penses et solde en temps rÃ©el. 
                        Les graphiques vous montrent oÃ¹ va votre argent.
                    </p>
                    <div class="tour-example">
                        <div class="example-card">
                            Les cartes en haut affichent vos totaux. 
                            Les graphiques circulaires montrent la rÃ©partition par catÃ©gorie.
                        </div>
                    </div>
                </div>

                <!-- Slide 3: Objectifs et budgets -->
                <div class="tour-slide" data-slide="3">
                    <div class="tour-illustration">ğŸ¯</div>
                    <h2 class="tour-title">Objectifs & Budgets</h2>
                    <p class="tour-description">
                        DÃ©finissez des objectifs d'Ã©pargne et des budgets mensuels par catÃ©gorie. 
                        L'app vous alertera quand vous approchez de vos limites.
                    </p>
                    <div class="tour-example">
                        <div class="example-card">
                            Cliquez sur "+ Ajouter un objectif" ou "+ DÃ©finir un budget" 
                            dans les cartes correspondantes.
                        </div>
                    </div>
                </div>

                <!-- Slide 4: SÃ©curitÃ© -->
                <div class="tour-slide" data-slide="4">
                    <div class="tour-illustration">ğŸ”’</div>
                    <h2 class="tour-title">SÃ©curisez vos donnÃ©es</h2>
                    <p class="tour-description">
                        CrÃ©ez un code PIN pour protÃ©ger vos informations. 
                        Activez le mode privÃ© (ğŸ‘ï¸) pour masquer temporairement les montants.
                    </p>
                    <div class="tour-example">
                        <div class="example-card">
                            <strong>Conseil :</strong> Vous pouvez passer la crÃ©ation du PIN 
                            et le configurer plus tard dans les paramÃ¨tres âš™ï¸
                        </div>
                    </div>
                </div>

                <!-- Slide 5: FonctionnalitÃ©s avancÃ©es -->
                <div class="tour-slide" data-slide="5">
                    <div class="tour-illustration">âœ¨</div>
                    <h2 class="tour-title">Et bien plus encore !</h2>
                    <p class="tour-description">
                        DÃ©couvrez les dettes & prÃªts ğŸ’³, investissements ğŸ“ˆ, 
                        abonnements ğŸ””, transactions rÃ©currentes ğŸ”„, 
                        convertisseur de devises ğŸ’± et bien plus !
                    </p>
                    <div class="tour-example">
                        <div class="example-card">
                            Explorez toutes les cartes en dÃ©filant vers le bas. 
                            Cliquez sur les Ã©lÃ©ments pour dÃ©couvrir leurs fonctionnalitÃ©s.
                        </div>
                    </div>
                </div>
            </div>

            <div class="tour-navigation">
                <button class="btn btn-secondary" onclick="previousSlide()" id="prevBtn" disabled>
                    <span class="btn-icon">â†</span>
                    <span class="btn-text">PrÃ©cÃ©dent</span>
                </button>
                <div class="tour-dots" id="tourDots">
                    <span class="tour-dot active" onclick="goToSlide(1)"></span>
                    <span class="tour-dot" onclick="goToSlide(2)"></span>
                    <span class="tour-dot" onclick="goToSlide(3)"></span>
                    <span class="tour-dot" onclick="goToSlide(4)"></span>
                    <span class="tour-dot" onclick="goToSlide(5)"></span>
                </div>
                <button class="btn btn-primary" onclick="nextSlide()" id="nextBtn">
                    <span class="btn-text">Suivant</span>
                    <span class="btn-icon">â†’</span>
                </button>
            </div>

            <button class="btn btn-ghost onboarding-btn-skip" onclick="skipOnboarding()">
                Passer le tour
            </button>
        </div>
    </div>

    <!-- Quick Start Screen -->
    <div class="onboarding-screen" id="quickStartScreen" style="display: none;">
        <div class="onboarding-content">
            <div class="tour-illustration">ğŸš€</div>
            <h2 class="onboarding-title">CommenÃ§ons !</h2>
            <p class="onboarding-subtitle">Que souhaitez-vous faire en premier ?</p>

            <div class="quick-start-actions">
                <div class="quick-start-card" onclick="quickStartAction('transaction')">
                    <div class="quick-start-icon">ğŸ’³</div>
                    <div class="quick-start-label">Ajouter ma premiÃ¨re transaction</div>
                </div>
                <div class="quick-start-card" onclick="quickStartAction('goal')">
                    <div class="quick-start-icon">ğŸ¯</div>
                    <div class="quick-start-label">DÃ©finir un objectif</div>
                </div>
                <div class="quick-start-card" onclick="quickStartAction('budget')">
                    <div class="quick-start-icon">ğŸ’°</div>
                    <div class="quick-start-label">CrÃ©er un budget</div>
                </div>
                <div class="quick-start-card" onclick="quickStartAction('explore')">
                    <div class="quick-start-icon">ğŸ”</div>
                    <div class="quick-start-label">Explorer l'application</div>
                </div>
            </div>

            <button class="btn btn-ghost onboarding-btn-skip" onclick="finishOnboarding()">
                Je dÃ©couvrirai par moi-mÃªme
            </button>
        </div>
    </div>
</div>

    <nav class="navbar">
        <div class="nav-container">
            <div class="logo">
                <span>ğŸ’°</span>
                <span>Finance Tracker</span>
            </div>
            <div class="nav-actions">
                <button class="nav-btn btn-icon" onclick="toggleNotifications()" title="Notifications" aria-label="Notifications">
                    <span>ğŸ””</span>
                </button>
                <button class="nav-btn btn-icon" onclick="togglePrivateMode()" id="privateModeBtn" title="Mode privÃ©" aria-label="Mode privÃ©">
                    <span>ğŸ‘ï¸</span>
                </button>
                <button class="nav-btn btn-icon" onclick="openSettingsModal()" title="ParamÃ¨tres" aria-label="ParamÃ¨tres">
                    <span>âš™ï¸</span>
                </button>
                <button class="export-btn btn btn-primary" onclick="openExportModal()" aria-label="Exporter les donnÃ©es" style="margin-bottom: 25px;">
                    <span>ğŸ“¤</span>
                    <span>Export</span>
                </button>
                <button class="theme-toggle btn-icon" id="themeToggle" aria-label="Basculer le thÃ¨me">
                    <span id="themeIcon">ğŸŒ™</span>
                </button>
            </div>
        </div>
    </nav>

    <!-- PIN Overlay -->
    <div class="pin-overlay" id="pinOverlay">
        <div class="pin-container">
            <div class="pin-title">ğŸ”’ Code PIN</div>
            <div id="pinMessage" style="color: var(--text-secondary); margin-bottom: 20px;">Entrez votre code PIN</div>
            <div class="pin-input" id="pinInputDisplay">
                <input type="password" class="pin-digit" maxlength="1" readonly>
                <input type="password" class="pin-digit" maxlength="1" readonly>
                <input type="password" class="pin-digit" maxlength="1" readonly>
                <input type="password" class="pin-digit" maxlength="1" readonly>
            </div>
            <div class="pin-keypad">
                <button class="pin-key" onclick="addPinDigit('1')">1</button>
                <button class="pin-key" onclick="addPinDigit('2')">2</button>
                <button class="pin-key" onclick="addPinDigit('3')">3</button>
                <button class="pin-key" onclick="addPinDigit('4')">4</button>
                <button class="pin-key" onclick="addPinDigit('5')">5</button>
                <button class="pin-key" onclick="addPinDigit('6')">6</button>
                <button class="pin-key" onclick="addPinDigit('7')">7</button>
                <button class="pin-key" onclick="addPinDigit('8')">8</button>
                <button class="pin-key" onclick="addPinDigit('9')">9</button>
                <button class="pin-key" onclick="clearPin()">â†</button>
                <button class="pin-key" onclick="addPinDigit('0')">0</button>
                <button class="pin-key" onclick="skipPin()" style="font-size: 1.2em;" title="Passer (uniquement si aucun code n'est dÃ©fini)">âœ“</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="masonry-grid" id="masonryGrid">
            <div class="masonry-item">
                <div class="pin-card">
                    <div class="pin-content">
                        <div class="pin-header">
                            <div class="pin-label">Revenus Total</div>
                            <div class="pin-icon">ğŸ“‰</div>
                        </div>
                        <div class="pin-amount revenue" id="totalRevenue">0 FCFA</div>
                    </div>
                </div>
            </div>

            <div class="masonry-item">
                <div class="pin-card">
                    <div class="pin-content">
                        <div class="pin-header">
                            <div class="pin-label">DÃ©penses Total</div>
                            <div class="pin-icon">ğŸ“ˆ</div>
                        </div>
                        <div class="pin-amount expense" id="totalExpense">0 FCFA</div>
                    </div>
                </div>
            </div>

            <div class="masonry-item">
                <div class="pin-card">
                    <div class="pin-content">
                        <div class="pin-header">
                            <div class="pin-label">Solde Actuel</div>
                            <div class="pin-icon">ğŸ’µ</div>
                        </div>
                        <div class="pin-amount balance" id="balance">0 FCFA</div>
                    </div>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card">
                    <h2>âœ¨ Nouvelle Transaction</h2>
                    <form id="transactionForm">
                        <div class="form-group">
                            <label for="description">Description</label>
                            <input type="text" id="description" placeholder="Ex: Salaire, Courses..." required>
                        </div>
                        <div class="form-group">
                            <label for="amount">Montant (FCFA)</label>
                            <input type="number" id="amount" placeholder="0" min="0" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="category">CatÃ©gorie</label>
                            <select id="category" required>
                                <option value="">Choisir...</option>
                                <option value="Salaire">ğŸ’¼ Salaire</option>
                                <option value="Freelance">ğŸ’» Freelance</option>
                                <option value="Investissement">ğŸ“ˆ Investissement</option>
                                <option value="Alimentation">ğŸ” Alimentation</option>
                                <option value="Transport">ğŸš— Transport</option>
                                <option value="Logement">ğŸ  Logement</option>
                                <option value="Loisirs">ğŸ® Loisirs</option>
                                <option value="SantÃ©">âš•ï¸ SantÃ©</option>
                                <option value="Ã‰ducation">ğŸ“š Ã‰ducation</option>
                                <option value="Autre">ğŸ“¦ Autre</option>
                            </select>
                        </div>
                        <div class="btn-group">
                            <button type="submit" class="btn btn-primary btn-lg revenue-btn" data-type="revenue" aria-label="Ajouter un revenu">
                                <span class="btn-icon">ğŸ’°</span>
                                <span class="btn-text">+ Revenu</span>
                                <span class="btn-loading" style="display: none;">â³</span>
                            </button>
                            <button type="submit" class="btn btn-primary btn-lg expense-btn" data-type="expense" aria-label="Ajouter une dÃ©pense">
                                <span class="btn-icon">ğŸ’¸</span>
                                <span class="btn-text">- DÃ©pense</span>
                                <span class="btn-loading" style="display: none;">â³</span>
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card" onclick="openCategoryModal()" style="cursor: pointer;">
                    <h2>ğŸ“Š DÃ©penses par CatÃ©gorie</h2>
                    <canvas id="pieChart" class="chart-canvas" style="max-height: 200px;"></canvas>
                    <div style="text-align: center; margin-top: 15px; color: var(--text-secondary); font-size: 0.85em;">
                        Cliquez pour plus de dÃ©tails ğŸ”
                    </div>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ’¡ Conseils Financiers</h2>
                    <div id="tipsContainer"></div>
                    <div class="tips-navigation" id="tipsNavigation"></div>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ“ˆ Analyse Temporelle</h2>
                    <div class="form-group" style="margin-bottom: 15px;">
                        <select id="timeFilter" style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                            <option value="7">7 derniers jours</option>
                            <option value="30">30 derniers jours</option>
                            <option value="90">90 derniers jours</option>
                            <option value="365">1 an</option>
                        </select>
                    </div>
                    <canvas id="lineChart" class="chart-canvas" style="cursor: pointer;"></canvas>
                    <button class="btn btn-primary btn-lg full-width" onclick="openTimeAnalysisModal()" aria-label="Voir l'analyse dÃ©taillÃ©e">
                        <span class="btn-icon">ğŸ“Š</span>
                        <span class="btn-text">Voir l'analyse dÃ©taillÃ©e</span>
                    </button>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card" onclick="openAllTransactionsModal()" style="cursor: pointer;">
                    <h2>ğŸ“Š Toutes les Transactions</h2>
                    <div class="chart-container">
                        <div id="transactionsSummaryContainer">
                            <div class="transactions-summary-wrapper" id="transactionsSummaryWrapper">
                                <div class="transaction-summary-slide">
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">Revenus</div>
                                        <div class="transaction-summary-value revenue-color" id="summaryRevenues">0</div>
                                    </div>
                                </div>
                                <div class="transaction-summary-slide">
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">DÃ©penses</div>
                                        <div class="transaction-summary-value expense-color" id="summaryExpenses">0</div>
                                    </div>
                                </div>
                                <div class="transaction-summary-slide">
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">Total</div>
                                        <div class="transaction-summary-value total-color" id="summaryTotal">0</div>
                                    </div>
                                </div>
                            </div>
                            <div class="transactions-summary-navigation" id="transactionsSummaryNavigation"></div>
                        </div>
                        <div style="text-align: center; color: var(--text-secondary); font-size: 0.9em; margin-top: 10px;">
                            Cliquez pour voir tous les dÃ©tails ğŸ“‹
                        </div>
                    </div>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ¯ Objectifs Financiers</h2>
                    <div class="chart-container" id="goalsContainer">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ¯</div>
                            <p>Aucun objectif</p>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg full-width" onclick="openGoalModal()" aria-label="Ajouter un objectif">
                        <span class="btn-icon">ğŸ¯</span>
                        <span class="btn-text">+ Ajouter un objectif</span>
                    </button>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ’° Budgets Mensuels</h2>
                    <div class="chart-container" id="budgetsContainer">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ’°</div>
                            <p>Aucun budget</p>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg full-width" onclick="openBudgetModal()" aria-label="DÃ©finir un budget">
                        <span class="btn-icon">ğŸ’°</span>
                        <span class="btn-text">+ DÃ©finir un budget</span>
                    </button>
                </div>
            </div>

            <!-- ğŸ’³ Dettes & PrÃªts -->
            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ’³ Dettes & PrÃªts</h2>
                    <div class="chart-container" id="debtsContainer">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ’³</div>
                            <p>Aucun prÃªt/en dette</p>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg full-width" onclick="openDebtModal()" aria-label="Ajouter une dette">
                        <span class="btn-icon">ğŸ’³</span>
                        <span class="btn-text">+ Ajouter dette/emprunt</span>
                    </button>
                </div>
            </div>

            <!-- ğŸ“ˆ Investissements -->
            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ“ˆ Investissements</h2>
                    <div class="chart-container" id="investmentsContainer">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ“ˆ</div>
                            <p>Aucun investissement</p>
                        </div>
                    </div>
                    <div class="investment-buttons">
                        <button class="btn btn-primary btn-lg" onclick="openInvestmentModal()" aria-label="Ajouter un investissement">
                            <span class="btn-icon">ğŸ“ˆ</span>
                            <span class="btn-text">+ Ajouter</span>
                        </button>
                        <button class="btn btn-secondary btn-lg" onclick="updateInvestmentSummary()" aria-label="Voir le rÃ©sumÃ©">
                            <span class="btn-icon">ğŸ“Š</span>
                            <span class="btn-text">RÃ©sumÃ©</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- ğŸ”” Abonnements -->
            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ”” Abonnements</h2>
                    <div class="chart-container" id="subscriptionsContainer">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ””</div>
                            <p>Aucun abonnement dÃ©tectÃ©</p>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg full-width" onclick="openSubscriptionModal()" aria-label="Ajouter un abonnement">
                        <span class="btn-icon">ğŸ””</span>
                        <span class="btn-text">+ Ajouter abonnement</span>
                    </button>
                </div>
            </div>

            <!-- ğŸ’± Convertisseur -->
            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ’± Convertisseur</h2>
                    <div class="currency-converter">
                        <div class="form-group">
                            <label>Montant</label>
                            <input type="number" id="convertAmount" placeholder="0" min="0" value="10000">
                        </div>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin: 15px 0;">
                            <div class="form-group">
                                <label>De</label>
                                <select id="fromCurrency">
                                    <option value="XAF">FCFA (XAF)</option>
                                    <option value="EUR">Euro (EUR)</option>
                                    <option value="USD">Dollar (USD)</option>
                                    <option value="GBP">Livre (GBP)</option>
                                </select>
                            </div>
                            <div class="form-group">
                                <label>Vers</label>
                                <select id="toCurrency">
                                    <option value="XOF">FCFA (XOF)</option>
                                    <option value="EUR" selected>Euro (EUR)</option>
                                    <option value="USD">Dollar (USD)</option>
                                    <option value="GBP">Livre (GBP)</option>
                                </select>
                            </div>
                        </div>
                        <div style="text-align: center; padding: 20px; background: var(--bg-secondary); border-radius: 12px; margin-bottom: 15px;">
                            <div id="conversionResult" style="font-size: 1.8em; font-weight: 700; color: var(--accent-revenue);">
                                15.25 EUR
                            </div>
                            <div id="conversionRate" style="font-size: 0.9em; color: var(--text-secondary); margin-top: 5px;">
                                1 EUR = 655.96 XOF
                            </div>
                        </div>
                        <button class="btn btn-primary btn-lg full-width" onclick="convertCurrency()" aria-label="Convertir">
                            <span class="btn-icon">ğŸ’±</span>
                            <span class="btn-text">Convertir</span>
                        </button>
                    </div>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ” Recherche & Filtres</h2>
                    <div style="margin-bottom: 15px;">
                        <input type="text" id="searchInput" placeholder="ğŸ” Rechercher une transaction..." style="width: 100%; padding: 12px; border: 2px solid var(--border-color); border-radius: 10px; background: var(--bg-primary); color: var(--text-primary);">
                    </div>
                    <div class="form-group">
                        <select id="filterType" style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid var(--border-color); background: var(--bg-primary); color: var(--text-primary); margin-bottom: 10px;">
                            <option value="all">Tous les types</option>
                            <option value="revenue">Revenus uniquement</option>
                            <option value="expense">DÃ©penses uniquement</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <select id="filterCategory" style="width: 100%; padding: 10px; border-radius: 8px; border: 2px solid var(--border-color); background: var(--bg-primary); color: var(--text-primary);">
                            <option value="all">Toutes les catÃ©gories</option>
                        </select>
                    </div>
                    <button class="btn btn-primary btn-lg full-width" onclick="applyFilters()" aria-label="Appliquer les filtres" style="margin-bottom: 15px;">
                        <span class="btn-icon">ğŸ”</span>
                        <span class="btn-text">Appliquer les filtres</span>
                    </button>
                    <button class="btn btn-secondary btn-lg full-width" onclick="resetFilters()" aria-label="RÃ©initialiser les filtres">
                        <span class="btn-icon">ğŸ”„</span>
                        <span class="btn-text">RÃ©initialiser</span>
                    </button>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card">
                    <h2>ğŸ”„ Transactions RÃ©currentes</h2>
                    <div class="chart-container" id="recurringContainer">
                        <div class="empty-state">
                            <div class="empty-state-icon">ğŸ”„</div>
                            <p>Aucune transaction rÃ©currente</p>
                        </div>
                    </div>
                    <button class="btn btn-primary btn-lg full-width" onclick="openRecurringModal()" aria-label="Ajouter une rÃ©currence">
                        <span class="btn-icon">ğŸ”„</span>
                        <span class="btn-text">+ Ajouter rÃ©currence</span>
                    </button>
                </div>
            </div>

            <div class="masonry-item">
                <div class="form-card" onclick="openStatsModal()" style="cursor: pointer;">
                    <h2>ğŸ“ˆ Statistiques AvancÃ©es</h2>
                    <div class="chart-container">
                        <div id="statsSummaryContainer">
                            <div class="stats-summary-wrapper" id="statsSummaryWrapper">
                                <div class="stats-summary-slide">
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">DÃ©pense/Jour</div>
                                        <div class="transaction-summary-value expense-color" id="avgPerDay">0 FCFA</div>
                                    </div>
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">Revenu/Jour</div>
                                        <div class="transaction-summary-value revenue-color">0 FCFA</div>
                                    </div>
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">Total Transactions</div>
                                        <div class="transaction-summary-value total-color" id="totalTransactions">0</div>
                                    </div>
                                </div>
                                <div class="stats-summary-slide">
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">DÃ©pense/Mois</div>
                                        <div class="transaction-summary-value expense-color" id="avgPerMonth">0 FCFA</div>
                                    </div>
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">Revenu/Mois</div>
                                        <div class="transaction-summary-value revenue-color">0 FCFA</div>
                                    </div>
                                    <div class="transaction-summary-box">
                                        <div class="transaction-summary-label">Montant Moyen</div>
                                        <div class="transaction-summary-value total-color">0 FCFA</div>
                                    </div>
                                </div>
                            </div>
                            <div class="stats-summary-navigation" id="statsSummaryNavigation"></div>
                        </div>
                        <div style="text-align: center; color: var(--text-secondary); font-size: 0.9em; margin-top: 10px;">
                            Cliquez pour plus de statistiques ğŸ“Š
                        </div>
                    </div>
                </div>
            </div>

            <div class="masonry-item" id="transactionsContainer"></div>
        </div>
    </div>

    <!-- Tous les modals (Settings, Category, Time Analysis, etc.) -->
    <div class="modal" id="settingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âš™ï¸ ParamÃ¨tres</h2>
                <button class="modal-close" onclick="closeSettingsModal()">Ã—</button>
            </div>
            <div style="margin-bottom: 20px;">
                <h3 style="color: var(--text-primary); margin-bottom: 15px; font-size: 1.1em;">ğŸ”’ SÃ©curitÃ©</h3>
                
                <div class="form-group">
                    <label for="pinLength">Longueur du code PIN</label>
                    <select id="pinLength" onchange="updatePinLength()">
                        <option value="4">4 chiffres</option>
                        <option value="6">6 chiffres</option>
                        <option value="8">8 chiffres</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="lockTimeout">Verrouillage automatique</label>
                    <select id="lockTimeout" onchange="updateLockTimeout()">
                        <option value="60000">1 minute</option>
                        <option value="180000">3 minutes</option>
                        <option value="300000">5 minutes</option>
                        <option value="600000">10 minutes</option>
                        <option value="1800000">30 minutes</option>
                        <option value="0">DÃ©sactivÃ©</option>
                    </select>
                </div>

                <button class="btn btn-danger btn-lg full-width" onclick="resetPinCode()" aria-label="RÃ©initialiser le code PIN">
                    <span class="btn-icon">ğŸ”„</span>
                    <span class="btn-text">RÃ©initialiser le code PIN</span>
                </button>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="color: var(--text-primary); margin-bottom: 15px; font-size: 1.1em;">ğŸ“Š DonnÃ©es</h3>
                
                <div style="display: grid; gap: 10px;">
                    <button class="btn btn-danger btn-lg full-width" onclick="clearAllData()" aria-label="Supprimer toutes les donnÃ©es">
                        <span class="btn-icon">ğŸ—‘ï¸</span>
                        <span class="btn-text">Supprimer toutes les donnÃ©es</span>
                    </button>
                </div>
            </div>

            <!-- ğŸ”” Notifications Settings -->
            <div style="margin-bottom: 20px;">
                <h3 style="color: var(--text-primary); margin-bottom: 15px; font-size: 1.1em;">ğŸ”” Notifications</h3>
                
                <div class="notification-settings">
                    <!-- Master Toggle -->
                    <div class="notification-item">
                        <div class="notification-label">
                            <span class="notification-icon">ğŸ””</span>
                            <div>
                                <div class="notification-title">Notifications activÃ©es</div>
                                <div class="notification-desc">Activer/dÃ©sactiver toutes les notifications</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="notificationsEnabled" onchange="updateNotificationSetting('enabled', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Expense Reminders -->
                    <div class="notification-item">
                        <div class="notification-label">
                            <span class="notification-icon">ğŸ’¸</span>
                            <div>
                                <div class="notification-title">Rappels de dÃ©penses</div>
                                <div class="notification-desc">Recevoir des rappels pour les dÃ©penses rÃ©currentes</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="expenseReminders" onchange="updateNotificationSetting('expenseReminders', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Budget Alerts -->
                    <div class="notification-item">
                        <div class="notification-label">
                            <span class="notification-icon">ğŸ’°</span>
                            <div>
                                <div class="notification-title">Alertes de budget</div>
                                <div class="notification-desc">Notifications quand le budget approche de la limite</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="budgetAlerts" onchange="updateNotificationSetting('budgetAlerts', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Subscription Reminders -->
                    <div class="notification-item">
                        <div class="notification-label">
                            <span class="notification-icon">ğŸ“…</span>
                            <div>
                                <div class="notification-title">Rappels d'abonnements</div>
                                <div class="notification-desc">Rappels avant les prÃ©lÃ¨vements d'abonnements</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="subscriptionReminders" onchange="updateNotificationSetting('subscriptionReminders', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Goal Progress -->
                    <div class="notification-item">
                        <div class="notification-label">
                            <span class="notification-icon">ğŸ¯</span>
                            <div>
                                <div class="notification-title">Progression des objectifs</div>
                                <div class="notification-desc">Notifications de progression vers vos objectifs</div>
                            </div>
                        </div>
                        <label class="toggle-switch">
                            <input type="checkbox" id="goalProgress" onchange="updateNotificationSetting('goalProgress', this.checked)">
                            <span class="toggle-slider"></span>
                        </label>
                    </div>

                    <!-- Reminder Time -->
                    <div class="notification-time-setting">
                        <label for="reminderTime" class="notification-time-label">
                            <span class="notification-icon">â°</span>
                           Heure de rappel quotidienne
                        </label>
                        <input type="time" id="reminderTime" class="notification-time-input" onchange="updateNotificationSetting('reminderTime', this.value)">
                    </div>
                </div>
            </div>

            <div style="margin-bottom: 20px;">
                <h3 style="color: var(--text-primary); margin-bottom: 15px; font-size: 1.1em;">â„¹ï¸ Informations</h3>
                
                <div class="stat-grid">
                    <div class="stat-box">
                        <div class="stat-label">Transactions</div>
                        <div class="stat-value" id="totalTransactions">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Objectifs</div>
                        <div class="stat-value" id="totalGoals">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Budgets</div>
                        <div class="stat-value" id="totalBudgets">0</div>
                    </div>
                    <div class="stat-box">
                        <div class="stat-label">Version</div>
                        <div class="stat-value" style="font-size: 1em;">2.0</div>
                    </div>
                </div>
            </div>

            <div class="modal-actions">
                <button type="button" class="btn btn-secondary btn-lg full-width" onclick="closeSettingsModal()">
                    <span class="btn-icon">âœ–ï¸</span>
                    <span class="btn-text">Fermer</span>
                </button>
                </div>
        </div>
    </div>

    <!-- Category Modal -->
    <div class="modal" id="categoryModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2>ğŸ“Š Analyse DÃ©taillÃ©e des DÃ©penses</h2>
                <button class="modal-close" onclick="closeCategoryModal()">Ã—</button>
            </div>
            <div id="categoryModalContent"></div>
        </div>
    </div>

    <!-- All Transactions Modal -->
    <div class="modal" id="allTransactionsModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>ğŸ“Š Toutes les Transactions</h2>
                <button class="modal-close" onclick="closeAllTransactionsModal()">Ã—</button>
            </div>
            <div id="allTransactionsModalContent"></div>
        </div>
    </div>

    <!-- Time Analysis Modal -->
    <div class="modal" id="timeAnalysisModal">
        <div class="modal-content" style="max-width: 900px;">
            <div class="modal-header">
                <h2>ğŸ“Š Analyse Temporelle DÃ©taillÃ©e</h2>
                <button class="modal-close" onclick="closeTimeAnalysisModal()">Ã—</button>
            </div>
            <div id="timeAnalysisModalContent"></div>
        </div>
    </div>

    <!-- Export Modal -->
    <div class="modal" id="exportModal">
        <div class="modal-content" style="max-width: 600px;">
            <div class="modal-header">
                <h2>ğŸ“¤ Export / Import</h2>
                <button class="modal-close" onclick="closeExportModal()">Ã—</button>
            </div>
            <div style="margin-bottom: 30px;">
                <h3 style="color: var(--text-primary); margin-bottom: 15px; font-size: 1.2em;">ğŸ“¥ Importer des donnÃ©es</h3>
                <input type="file" id="importFile" accept=".json" style="display: none;" onchange="importData(event)">
                <button class="btn btn-success btn-lg full-width" onclick="document.getElementById('importFile').click()" aria-label="Importer depuis JSON">
                    <span class="btn-icon">ğŸ“¥</span>
                    <span class="btn-text">Importer depuis JSON</span>
                </button>
                <p style="color: var(--text-secondary); font-size: 0.85em; text-align: center;">
                    SÃ©lectionnez un fichier JSON exportÃ© prÃ©cÃ©demment
                </p>
            </div>
            <div>
                <h3 style="color: var(--text-primary); margin-bottom: 15px; font-size: 1.2em;">ğŸ“¤ Exporter vos donnÃ©es</h3>
                <div style="display: grid; gap: 12px;">
                    <button class="btn btn-primary btn-lg full-width" onclick="exportToJSON()" aria-label="Exporter en JSON">
                        <span class="btn-icon">ğŸ“„</span>
                        <span class="btn-text">Exporter en JSON</span>
                    </button>
                    <button class="btn btn-primary btn-lg full-width" onclick="exportToCSV()" aria-label="Exporter en CSV">
                        <span class="btn-icon">ğŸ“Š</span>
                        <span class="btn-text">Exporter en CSV</span>
                    </button>
                </div>
                <p style="color: var(--text-secondary); font-size: 0.85em; text-align: center; margin-top: 10px;">
                    TÃ©lÃ©chargez vos donnÃ©es pour les sauvegarder
                </p>
            </div>
        </div>
    </div>

    <!-- Goal Modal -->
    <div class="modal" id="goalModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ¯ Nouvel Objectif</h2>
                <button class="modal-close" onclick="closeGoalModal()">Ã—</button>
            </div>
            <form id="goalForm">
                <div class="form-group">
                    <label for="goalName">Nom de l'objectif</label>
                    <input type="text" id="goalName" placeholder="Ex: Vacances, Nouveau tÃ©lÃ©phone..." required>
                </div>
                <div class="form-group">
                    <label for="goalAmount">Montant cible (FCFA)</label>
                    <input type="number" id="goalAmount" placeholder="0" min="0" step="1000" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeGoalModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">CrÃ©er</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Budget Modal -->
    <div class="modal" id="budgetModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’° Nouveau Budget</h2>
                <button class="modal-close" onclick="closeBudgetModal()">Ã—</button>
            </div>
            <form id="budgetForm">
                <div class="form-group">
                    <label for="budgetCategory">CatÃ©gorie</label>
                    <select id="budgetCategory" required>
                        <option value="">Choisir...</option>
                        <option value="Alimentation">ğŸ” Alimentation</option>
                        <option value="Transport">ğŸš— Transport</option>
                        <option value="Logement">ğŸ  Logement</option>
                        <option value="Loisirs">ğŸ® Loisirs</option>
                        <option value="SantÃ©">âš•ï¸ SantÃ©</option>
                        <option value="Ã‰ducation">ğŸ“š Ã‰ducation</option>
                        <option value="Autre">ğŸ“¦ Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="budgetAmount">Budget mensuel (FCFA)</label>
                    <input type="number" id="budgetAmount" placeholder="0" min="0" step="1000" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeBudgetModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">CrÃ©er</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Recurring Modal -->
    <div class="modal" id="recurringModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”„ Nouvelle RÃ©currence</h2>
                <button class="modal-close" onclick="closeRecurringModal()">Ã—</button>
            </div>
            <form id="recurringForm">
                <div class="form-group">
                    <label for="recurringDescription">Description</label>
                    <input type="text" id="recurringDescription" placeholder="Ex: Salaire mensuel, Loyer..." required>
                </div>
                <div class="form-group">
                    <label for="recurringAmount">Montant (FCFA)</label>
                    <input type="number" id="recurringAmount" placeholder="0" min="0" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="recurringCategory">CatÃ©gorie</label>
                    <select id="recurringCategory" required>
                        <option value="">Choisir...</option>
                        <option value="Salaire">ğŸ’¼ Salaire</option>
                        <option value="Freelance">ğŸ’» Freelance</option>
                        <option value="Alimentation">ğŸ” Alimentation</option>
                        <option value="Transport">ğŸš— Transport</option>
                        <option value="Logement">ğŸ  Logement</option>
                        <option value="Loisirs">ğŸ® Loisirs</option>
                        <option value="SantÃ©">âš•ï¸ SantÃ©</option>
                        <option value="Ã‰ducation">ğŸ“š Ã‰ducation</option>
                        <option value="Autre">ğŸ“¦ Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="recurringType">Type</label>
                    <select id="recurringType" required>
                        <option value="revenue">Revenu</option>
                        <option value="expense">DÃ©pense</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="recurringFrequency">FrÃ©quence</label>
                    <select id="recurringFrequency" required>
                        <option value="weekly">Hebdomadaire</option>
                        <option value="monthly">Mensuel</option>
                        <option value="yearly">Annuel</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeRecurringModal()">Annuler</button>
                    <button type="submit" class="btn btn-save">CrÃ©er</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Stats Modal -->
    <div class="modal" id="statsModal">
        <div class="modal-content" style="max-width: 800px;">
            <div class="modal-header">
                <h2>ğŸ“ˆ Statistiques AvancÃ©es</h2>
                <button class="modal-close" onclick="closeStatsModal()">Ã—</button>
            </div>
            <div id="statsModalContent"></div>
        </div>
    </div>

    <!-- ğŸ’³ Debt Modal -->
    <div class="modal" id="debtModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ’³ Nouvelle Dette / PrÃªt</h2>
                <button class="modal-close" onclick="closeDebtModal()">Ã—</button>
            </div>
            <form id="debtForm">
                <div class="form-group">
                    <label for="debtDescription">Description</label>
                    <input type="text" id="debtDescription" placeholder="Ex: PrÃªt familial, Dette carte..." required>
                </div>
                <div class="form-group">
                    <label for="debtAmount">Montant (FCFA)</label>
                    <input type="number" id="debtAmount" placeholder="0" min="0" step="1000" required>
                </div>
                <div class="form-group">
                    <label for="debtType">Type</label>
                    <select id="debtType" required>
                        <option value="owed_to_me">On me doit de l'argent</option>
                        <option value="i_owe">Je dois de l'argent</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="debtPerson">Personne</label>
                    <input type="text" id="debtPerson" placeholder="Nom de la personne" required>
                </div>
                <div class="form-group">
                    <label for="debtDueDate">Date d'Ã©chÃ©ance</label>
                    <input type="date" id="debtDueDate" required>
                </div>
                <div class="form-group">
                    <label for="debtInterest">Taux d'intÃ©rÃªt (%)</label>
                    <input type="number" id="debtInterest" placeholder="0" min="0" step="0.1" value="0">
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeDebtModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">Ajouter</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ğŸ“ˆ Investment Modal -->
    <div class="modal" id="investmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ“ˆ Nouvel Investissement</h2>
                <button class="modal-close" onclick="closeInvestmentModal()">Ã—</button>
            </div>
            <form id="investmentForm">
                <div class="form-group">
                    <label for="investmentName">Nom de l'investissement</label>
                    <input type="text" id="investmentName" placeholder="Ex: Actions Apple, Crypto BTC..." required>
                </div>
                <div class="form-group">
                    <label for="investmentType">Type</label>
                    <select id="investmentType" required>
                        <option value="stock">Actions / ETF</option>
                        <option value="crypto">Cryptomonnaie</option>
                        <option value="savings">Livret / Ã‰pargne</option>
                        <option value="real_estate">Immobilier</option>
                        <option value="other">Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="investmentAmount">Montant investi (FCFA)</label>
                    <input type="number" id="investmentAmount" placeholder="0" min="0" step="1000" required>
                </div>
                <div class="form-group">
                    <label for="investmentCurrentValue">Valeur actuelle (FCFA)</label>
                    <input type="number" id="investmentCurrentValue" placeholder="0" min="0" step="1000" required>
                </div>
                <div class="form-group">
                    <label for="investmentDate">Date d'achat</label>
                    <input type="date" id="investmentDate" required>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeInvestmentModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">Ajouter</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ğŸ”” Subscription Modal -->
    <div class="modal" id="subscriptionModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>ğŸ”” Nouvel Abonnement</h2>
                <button class="modal-close" onclick="closeSubscriptionModal()">Ã—</button>
            </div>
            <form id="subscriptionForm">
                <div class="form-group">
                    <label for="subscriptionName">Nom de l'abonnement</label>
                    <input type="text" id="subscriptionName" placeholder="Ex: Netflix, Spotify, AWS..." required>
                </div>
                <div class="form-group">
                    <label for="subscriptionAmount">Montant (FCFA)</label>
                    <input type="number" id="subscriptionAmount" placeholder="0" min="0" step="100" required>
                </div>
                <div class="form-group">
                    <label for="subscriptionFrequency">FrÃ©quence</label>
                    <select id="subscriptionFrequency" required>
                        <option value="weekly">Hebdomadaire</option>
                        <option value="monthly" selected>Mensuel</option>
                        <option value="quarterly">Trimestriel</option>
                        <option value="yearly">Annuel</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="subscriptionNextDate">Prochain prÃ©lÃ¨vement</label>
                    <input type="date" id="subscriptionNextDate" required>
                </div>
                <div class="form-group">
                    <label for="subscriptionCategory">CatÃ©gorie</label>
                    <select id="subscriptionCategory" required>
                        <option value="streaming">Streaming / Divertissement</option>
                        <option value="cloud">Cloud / Services</option>
                        <option value="software">Logiciels</option>
                        <option value="gaming">Gaming</option>
                        <option value="fitness">Fitness / SantÃ©</option>
                        <option value="news">ActualitÃ©s</option>
                        <option value="other">Autre</option>
                    </select>
                </div>
                <div style="margin-top: 15px;">
                    <label style="display: flex; align-items: center; gap: 10px; cursor: pointer;">
                        <input type="checkbox" id="subscriptionNotify" checked>
                        <span>Recevoir une notification avant le prÃ©lÃ¨vement</span>
                    </label>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeSubscriptionModal()">Annuler</button>
                    <button type="submit" class="btn btn-primary">Ajouter</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Investment Summary Modal -->
    <div class="modal" id="investmentSummaryModal">
        <div class="modal-content" style="max-width: 700px;">
            <div class="modal-header">
                <h2>ğŸ“ˆ RÃ©sumÃ© des Investissements</h2>
                <button class="modal-close" onclick="closeInvestmentSummaryModal()">Ã—</button>
            </div>
            <div id="investmentSummaryContent"></div>
        </div>
    </div>

    <!-- Edit Modal -->
    <div class="modal" id="editModal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>âœï¸ Modifier Transaction</h2>
                <button class="modal-close" onclick="closeEditModal()">Ã—</button>
            </div>
            <form id="editForm">
                <div class="form-group">
                    <label for="editDescription">Description</label>
                    <input type="text" id="editDescription" required>
                </div>
                <div class="form-group">
                    <label for="editAmount">Montant (FCFA)</label>
                    <input type="number" id="editAmount" min="0" step="0.01" required>
                </div>
                <div class="form-group">
                    <label for="editCategory">CatÃ©gorie</label>
                    <select id="editCategory" required>
                        <option value="">Choisir...</option>
                        <option value="Salaire">ğŸ’¼ Salaire</option>
                        <option value="Freelance">ğŸ’» Freelance</option>
                        <option value="Investissement">ğŸ“ˆ Investissement</option>
                        <option value="Alimentation">ğŸ” Alimentation</option>
                        <option value="Transport">ğŸš— Transport</option>
                        <option value="Logement">ğŸ  Logement</option>
                        <option value="Loisirs">ğŸ® Loisirs</option>
                        <option value="SantÃ©">âš•ï¸ SantÃ©</option>
                        <option value="Ã‰ducation">ğŸ“š Ã‰ducation</option>
                        <option value="Autre">ğŸ“¦ Autre</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="editType">Type</label>
                    <select id="editType" required>
                        <option value="revenue">Revenu</option>
                        <option value="expense">DÃ©pense</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-cancel" onclick="closeEditModal()">Annuler</button>
                    <button type="submit" class="btn btn-save">Sauvegarder</button>
                </div>
            </form>
        </div>
    </div>

   <script src="./utils-helpers.js"></script>
   <script src="./Script.js"></script>
   
   <!-- Mobile Bottom Navigation -->
   <div class="bottom-nav active" id="bottomNav">
       <div class="active-bubble" id="activeBubble"></div>
       
       <!-- Home -->
       <div class="nav-item active" data-index="0" data-page="home" onclick="navigateToPage('home')">
           <svg viewBox="0 0 24 24">
               <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
               <polyline points="9 22 9 12 15 12 15 22"></polyline>
           </svg>
       </div>
       
       <!-- Transactions -->
       <div class="nav-item" data-index="1" data-page="transactions" onclick="navigateToPage('transactions')">
           <svg viewBox="0 0 24 24">
               <line x1="12" y1="1" x2="12" y2="23"></line>
               <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
           </svg>
       </div>
       
       <!-- Center Plus Button -->
       <div class="nav-plus-container">
           <div class="plus-bubble"></div>
           <button class="nav-plus-btn" id="navPlusBtn" onclick="scrollToAddTransaction()" title="Ajouter une transaction">
               <svg viewBox="0 0 24 24">
                   <line x1="12" y1="5" x2="12" y2="19"></line>
                   <line x1="5" y1="12" x2="19" y2="12"></line>
               </svg>
           </button>
       </div>
       
       <!-- Analytics -->
       <div class="nav-item" data-index="2" data-page="analytics" onclick="navigateToPage('analytics')">
           <svg viewBox="0 0 24 24">
               <line x1="18" y1="20" x2="18" y2="10"></line>
               <line x1="12" y1="20" x2="12" y2="4"></line>
               <line x1="6" y1="20" x2="6" y2="14"></line>
           </svg>
       </div>
       
       <!-- Settings -->
       <div class="nav-item" data-index="3" data-page="settings" onclick="navigateToPage('settings')">
           <svg viewBox="0 0 24 24">
               <circle cx="12" cy="12" r="3"></circle>
               <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
           </svg>
       </div>
   </div>
   
   <script>
       // Bottom Navigation Functionality
       const bottomNavItems = document.querySelectorAll('#bottomNav .nav-item');
       const activeBubble = document.getElementById('activeBubble');
       const bottomNav = document.getElementById('bottomNav');
       
       // Section offsets for navigation
       const sectionOffsets = {
           'home': { top: 0, offset: -100 },
           'transactions': { top: 400, offset: -80 },
           'analytics': { top: 900, offset: -80 },
           'settings': { top: 2000, offset: -80 }
       };
       
       function updateBubblePosition(item) {
           if (!item || !activeBubble) return;
           
           const navRect = bottomNav.getBoundingClientRect();
           const itemRect = item.getBoundingClientRect();
           // Center the bubble on the nav item
           const leftPosition = itemRect.left - navRect.left;
           
           activeBubble.style.left = leftPosition + 'px';
           activeBubble.style.top = '4px';
       }
       
       // Initialize bubble position
       function initBottomNav() {
           const activeItem = document.querySelector('#bottomNav .nav-item.active');
           if (activeItem) {
               updateBubblePosition(activeItem);
           }
           
           // Add click handlers
           bottomNavItems.forEach(item => {
               item.addEventListener('click', function() {
                   // Remove active from all items
                   bottomNavItems.forEach(nav => nav.classList.remove('active'));
                   
                   // Add active to clicked item
                   this.classList.add('active');
                   
                   // Move bubble
                   updateBubblePosition(this);
                   
                   // Navigate to page
                   const page = this.dataset.page;
                   if (page) {
                       navigateToPage(page);
                   }
               });
           });
       }
       
       // Navigation function - scroll to section
       function navigateToPage(page) {
           // Store current page
           localStorage.setItem('currentPage', page);
           
           let scrollY = 0;
           switch(page) {
               case 'home':
                   scrollY = 0;
                   break;
               case 'transactions':
                   // Find the transactions form card position
                   const formCard = document.querySelector('.form-card h2');
                   if (formCard) {
                       scrollY = formCard.offsetTop - 100;
                   } else {
                       scrollY = 400;
                   }
                   break;
               case 'analytics':
                   // Find the pie chart card position
                   const pieCard = document.querySelector('#pieChart');
                   if (pieCard) {
                       scrollY = pieCard.offsetTop - 80;
                   } else {
                       scrollY = 900;
                   }
                   break;
               case 'settings':
                   // Scroll to top of settings modal position
                   scrollY = document.body.scrollHeight - 500;
                   break;
               default:
                   scrollY = 0;
           }
           
           // Smooth scroll to section
           window.scrollTo({ top: scrollY, behavior: 'smooth' });
           
           // Add visual feedback
           const navItem = document.querySelector(`#bottomNav .nav-item[data-page="${page}"]`);
           if (navItem) {
               navItem.style.transform = 'scale(0.95)';
               setTimeout(() => {
                   navItem.style.transform = '';
               }, 150);
           }
       }
       
       // Scroll to Add Transaction form
       function scrollToAddTransaction() {
           const transactionForm = document.getElementById('transactionForm');
           if (transactionForm) {
               const offsetTop = transactionForm.offsetTop - 100;
               window.scrollTo({ top: offsetTop, behavior: 'smooth' });
               
               // Add visual feedback to plus button
               const plusBtn = document.getElementById('navPlusBtn');
               if (plusBtn) {
                   plusBtn.style.transform = 'scale(0.9)';
                   setTimeout(() => {
                       plusBtn.style.transform = '';
                   }, 200);
               }
               
               // Focus on description input
               setTimeout(() => {
                   const descInput = document.getElementById('description');
                   if (descInput) {
                       descInput.focus();
                   }
               }, 500);
           }
       }
       
       // Recalculate bubble position on resize
       window.addEventListener('resize', () => {
           const activeItem = document.querySelector('#bottomNav .nav-item.active');
           if (activeItem) {
               updateBubblePosition(activeItem);
           }
       });
       
       // Initialize when DOM is ready
       if (document.readyState === 'loading') {
           document.addEventListener('DOMContentLoaded', initBottomNav);
       } else {
           initBottomNav();
       }
       
       // Restore active state from localStorage
       document.addEventListener('DOMContentLoaded', function() {
           const savedPage = localStorage.getItem('currentPage');
           if (savedPage) {
               const navItem = document.querySelector(`#bottomNav .nav-item[data-page="${savedPage}"]`);
               if (navItem) {
                   document.querySelectorAll('#bottomNav .nav-item').forEach(item => item.classList.remove('active'));
                   navItem.classList.add('active');
                   updateBubblePosition(navItem);
               }
           }
       });
   </script>
</body>
</html>
